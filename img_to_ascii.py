import numpy as np
import cv2
import time

# 50
# GRAYSCALE_TYPE = "@@@@@@@@@@@@%%%%%%%%#########********+++++++++===="
GRAYSCALE_TYPE = "@@@@@@@@%%%%%%%%#########********+++++++++========"
GRAYSCALE_LENGTH = len(GRAYSCALE_TYPE) - 1

"""
=======--------:::::::::........                  
=========--------:::::::::........                
++=========--------:::::::::........              
++++========---------:::::::::........            
++++++========---------:::::::::........          
++++++++=========--------:::::::::........        
*+++++++++=========--------:::::::::........      
***+++++++++=========--------:::::::::........    
******++++++++=========--------:::::::::........  
********++++++++=========--------:::::::::........
#*********++++++++=========--------:::::::::......
###*********++++++++=========--------:::::::::....
#####********+++++++++=========--------:::::::::..
#######********+++++++++=========--------:::::::::
#########*********++++++++=========--------:::::::
%%#########********+++++++++========---------:::::
%%%%#########********+++++++++=========--------:::
%%%%%%#########********+++++++++=========--------:
%%%%%%%%#########*********++++++++========--------
@@%%%%%%%%#########********+++++++++========------
@@@@%%%%%%%%#########*********++++++++========----
@@@@@@%%%%%%%%#########********+++++++++=========-
@@@@@@@@%%%%%%%%#########********+++++++++========
@@@@@@@@@@%%%%%%%%#########*********++++++++======
@@@@@@@@@@@@%%%%%%%%#########********+++++++++====
"""

# np.asf.mean() - усреднение
# np.full((3, 5), 7, dtype=int)
#FIXME: прописать type для входящего значения
def _img_averrager(np_array):
    vvv = np_array.mean()
    return np.full(np_array.shape, vvv)

if __name__ == '__main__':
    print('img_to_ascii start`s')
    shape = (480, 640)
    stream = cv2.VideoCapture(0)


    while(stream.read()[0]):
        frame = stream.read()[1]
        for i in range(shape[0]//10):
            stringa = ''
            for j in range(shape[1]//10):
                ii = i*10
                jj = j*10
                cheap = frame[ii : ii + 10, jj : jj + 10].mean()
                stringa += 2 * GRAYSCALE_TYPE[int(cheap * GRAYSCALE_LENGTH / 255)]
                # print(f"i = {i}, j = {j}")
                #print(f"{cheap}")
            print(stringa)
        time.sleep(0.5)
    # main()



